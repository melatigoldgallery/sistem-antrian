<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Tangerine:wght@400;700&display=swap" rel="stylesheet" />
    <!-- jQuery first -->
    <script src="js/jquery-3.6.3.min.js"></script>
    <!-- Bootstrap CSS and JS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
    <!-- Datepicker CSS and JS -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/locales/bootstrap-datepicker.id.min.js"></script>
    <!-- Firebase -->

    <!-- Your custom CSS -->
    <link rel="stylesheet" href="css/Project1.css" />
    <title>Sistem Antrian</title>
  </head>
  <body>
    <header>
      <nav>
        <div class="nav-brand">
          <a href="admin.html">
            <img src="img/Melati.jfif" alt="Logo" />
            <span class="tangerine-bold">Melati Gold Gallery</span>
          </a>
        </div>
        <div class="nav-list align-items-center mt-3">
          <ul class="d-flex justify-content-center gap-3">
            <li>
              <a class="text-decoration-none" href="#" id="documentationLink">Dokumentasi</a>
            </li>
            <li>
              <a class="text-decoration-none" href="analisis.html">Analisis Antrian</a>
            </li>
            <li>
              <a class="text-decoration-none" href="display.html">Display Antrian</a>
            </li>
          </ul>
        </div>
        <div class="hamburger-menu">
          <i class="fas fa-bars"></i>
        </div>
        <div class="left-nav">
          <div class="">
            <span id="clock" class="font-weight-bold"></span>
            <br/>
            <span id="tgl" class="font-weight-bold"></span>
          </div>
        </div>
      </nav>
    </header>
    <main>
      <div class="mainbar-atr">
        <div class="container mt-3">
          <!-- Customer Message Section -->
          <div class="row mb-4">
            <div class="col text-center">
              <button class="btn cta btn-lg" id="waitMessage">Informasi Tunggu</button>
              <button class="btn cta btn-lg d-none" id="waitInformation">Waiting Information</button>
            </div>
            <div class="col text-center">
              <button class="btn cta btn-lg" id="takeMessage">Pengingat Antrian</button>
              <button class="btn cta btn-lg d-none" id="takeQueue">Queue Reminder</button>
            </div>
          </div>
        </div>
        <div class="container-fluid">
          <!-- Queue Management Section -->
          <div class="row">
            <div class="col-md-3 mx-auto mb-5">
              <div class="card">
                <div class="card-body text-center">
                  <h5 class="card-title mb-4">Nomor Antrian Tertunda</h5>
                  <div class="queue-display mb-4" id="delayQueueNumber"></div>
                  <div class="action-buttons d-flex flex-column gap-3">
                    <button class="btn btn-primary" id="sequentialCallButton">Panggil Antrian Berurutan</button>
                    <button class="btn btn-info" id="sequentialCallQueueButton">Call Sequential Queue</button>
                    <button class="btn btn-success" id="delayHandleButton">Sudah Dilayani</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-3 mx-auto mb-5">
              <div class="card">
                <div class="card-body text-center">
                  <h5 class="card-title mb-4">Nomor Antrian Saat ini</h5>
                  <div class="queue-display mb-4" id="queueNumber"></div>
                  <div class="action-buttons d-flex flex-column gap-3">
                    <button class="btn btn-primary" id="callButton">Panggil Nomor Antrian</button>
                    <button class="btn btn-info" id="callQueue">Call Queue Number</button>
                    <button class="btn btn-success" id="handleButton">Sudah Dilayani</button>
                    <button class="btn btn-warning" id="delayQueueButton">Nomor Antrian Tertunda</button>
                    <button class="btn btn-danger" id="customQueueButton">Custom Nomor Antrian</button>
                    <button class="btn btn-secondary" id="resetButton">Reset Antrian</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-3 mx-auto">
              <div class="card">
                <div class="card-body text-center">
                  <h5 class="card-title mb-4">Nomor Antrian Selanjutnya</h5>
                  <div class="queue-display mb-4" id="nextQueueNumber"></div>
                  <div class="action-buttons d-flex flex-column gap-3">
                    <button class="btn btn-primary" id="handleButton">Antrian Selanjutnya Yang Akan Dipanggil</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-3 mx-auto">
              <div class="card">
                <div class="card-body text-center">
                  <h5 class="card-title mb-4">Informasi Kendaraan</h5>
                  <div class="queue-display mb-4" id="inputText">
                    <div class="form-group mb-4">
                      <input type="text" class="form-control" id="carType" placeholder="Jenis Kendaraan" />
                    </div>
                    <div class="form-group mb-4">
                      <input type="text" class="form-control" id="plateNumber" placeholder="Nomor Polisi" />
                    </div>
                  </div>
                  <div class="action-buttons d-flex flex-column gap-3">
                    <button class="btn btn-primary" id="panggilInformasi">Umumkan Informasi</button>
                    <button class="btn btn-info" id="callInformation">Announce Information</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Add this modal HTML before closing body tag -->
        <div class="modal fade" id="confirmModal" tabindex="-1">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Konfirmasi</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
              </div>
              <div class="modal-body">
                <p>Apakah Anda yakin nomor antrian ini sudah dilayani?</p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tidak</button>
                <button type="button" class="btn btn-primary" id="confirmYes">Ya</button>
              </div>
            </div>
          </div>
        </div>
        <!-- Modified Confirmation Modal for Delayed Queue -->
        <div class="modal fade" id="confirmDelayedModal" tabindex="-1">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="confirmDelayedModalLabel">Pilih Nomor Antrian</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
              </div>
              <div class="modal-body">
                <div class="form-group">
                  <label for="delayedQueueSelect">Pilih nomor antrian yang sudah dilayani:</label>
                  <div class="input-group mt-2">
                    <select class="form-select" id="delayedQueueSelect" aria-label="Pilih nomor antrian"></select>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                <button type="button" class="btn btn-primary" id="confirmDelayedYes">Selesai</button>
              </div>
            </div>
          </div>
        </div>
        <!-- Add this modal HTML before closing body tag -->
        <div class="modal fade" id="resetModal" tabindex="-1">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Reset Nomor Antrian</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
              </div>
              <div class="modal-body">
                <p>Reset nomor antrian ke A01?</p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tidak</button>
                <button type="button" class="btn btn-primary" id="resetYes">Ya</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Add this modal HTML before closing body tag -->
        <div class="modal fade" id="customQueueModal" tabindex="-1">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Set Custom Queue Number</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
              </div>
              <div class="modal-body">
                <div class="mb-3">
                  <label for="queueLetter" class="form-label">Letter (A-D)</label>
                  <select class="form-select" id="queueLetter">
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                    <option value="D">D</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label for="queueNumber" class="form-label">Number (1-50)</label>
                  <input type="number" class="form-control" id="queueNumberInput" min="1" max="50" />
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="setCustomQueue">Ok</button>
              </div>
            </div>
          </div>
        </div>
        <!-- Password Confirmation Modal -->
<div class="modal fade" id="passwordModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Authentication Required</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label for="adminId" class="form-label">Admin ID</label>
          <input type="text" class="form-control" id="adminId" required>
        </div>
        <div class="mb-3">
          <label for="adminPassword" class="form-label">Password</label>
          <input type="password" class="form-control" id="adminPassword" required>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="confirmPassword">Login</button>
      </div>
    </div>
  </div>
</div>
        <!-- Add this modal for delay queue confirmation -->
        <div class="modal fade" id="confirmDelayModal" tabindex="-1">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Konfirmasi Antrian Tertunda</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
              </div>
              <div class="modal-body">
                <p>Apakah Anda yakin ingin memindahkan nomor antrian ini ke antrian tertunda?</p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tidak</button>
                <button type="button" class="btn btn-primary" id="confirmDelayYes">Ya</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Documentation Modal -->
        <div class="modal fade" id="documentationModal" tabindex="-1">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">Alur Nomor Antrian</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
              </div>
              <div class="modal-body">
                <h6 class="fw-bold"></h6>
                <div class="mb-4">
                  <h6 class="fw-bold">1. Toko Tidak Ramai</h6>
                  <ul class="custom-list">
                    <li>
                      Customer datang ke toko staff langsung mengambil nomor antrian yang sudah disediakan kemudian
                      dibawa ke kasir dan diletakkan di tempat nomor antrian yang sudah dilayani.
                    </li>
                    <li>
                      Melakukan validasi (sudah dilayani) pada aplikasi nomor antrian bahwa nomor antrian yang dibawa
                      sebelumnya sudah dilayani.
                    </li>
                  </ul>
                </div>

                <div>
                  <h6 class="fw-bold">2. Toko Ramai</h6>
                  <ul class="custom-list">
                    <li>
                      Staff memberikan pengumuman pengingat pengambilan nomor antrian yang dilakukan lewat aplikasi.
                    </li>
                    <li>Customer meminta nomor antrian kepada staff dan menunggu sampai nomor antrian dipanggil.</li>
                    <li>
                      Ketika akan melayani customer baru maka staff melakukan pemanggilan pada aplikasi kemudian saat
                      customer memberikan nomor antrian, nomor antrian tersebut dibawa ke kasir lalu melanjutkan untuk
                      melayani customer sampai selesai.
                    </li>
                    <li>
                      Ketika melakukan pemanggilan nomor antrian dan tidak terdapat respon dari customer maka nomor
                      antrian tersebut dimasukkan ke nomor antrian tertunda.
                    </li>
                    <li>
                      Jika terdapat nomor antrian pada bagian nomor antrian tertunda maka setiap staff yang sudah
                      menghandle customer lebih memprioritaskan untuk menghandle nomor antrian di nomor antrian tertunda
                      terlebih dahulu dengan melakukan pemanggilan pada aplikasi.
                    </li>
                    <li>
                      Jika setelah melakukan pemanggilan customer tetap tidak ada respon maka dilanjutkan untuk
                      melakukan pemanggilan pada nomor antrian saat ini.
                    </li>
                  </ul>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Tutup</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <footer>
      <div class="credit">&copy Melati Gold Gallery 2025</div>
    </footer>
    <script type="module" src="js/melati.js"></script>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
      import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-database.js";
    </script>
  </body>
</html>
